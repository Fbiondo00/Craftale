/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

"use client";

import React from "react";
import Header from "./Header";
import { useAuth } from "@/contexts/AuthContext";
import { type SessionUser } from "@/lib/supabase/get-session";

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

/**
 * HeaderWrapper Component - Client Component
 *
 * Purpose: Wraps the Header component to provide auth callbacks
 * from the main AuthContext.
 *
 * This thin client wrapper allows the Header to remain a server component
 * while still having access to auth functionality through callbacks.
 *
 * This pattern ensures:
 * - Single AuthProvider instance (no duplication)
 * - Header remains server-side for better performance
 * - Auth state is shared across the entire app
 */

interface HeaderWrapperProps {
  sessionUser: SessionUser | null;
}

export default function HeaderWrapper({ sessionUser }: HeaderWrapperProps) {
  const { user, isLoading, openAuthModal, signOut } = useAuth();

  // Use client-side auth state once loaded, otherwise use server-side sessionUser
  // This prevents hydration mismatch during the initial render
  const currentUser = !isLoading ? user : sessionUser;

  return <Header sessionUser={currentUser} onOpenAuthModal={openAuthModal} onSignOut={signOut} />;
}

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

"use client";

import React, { memo, useMemo, useState } from "react";
import { useTheme } from "@/contexts/ThemeContext";

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

/**
 * ThemeToggle.tsx
 *
 * Accessible dark mode toggle component with comprehensive WCAG 2.1 compliance.
 *
 * Features:
 * - Full keyboard accessibility with focus management
 * - ARIA attributes for screen reader support (aria-pressed, aria-label, aria-describedby)
 * - Respects prefers-reduced-motion for animations
 * - Visual feedback with sun/moon icons and smooth transitions
 * - Accessible tooltip on hover/focus
 * - Memoized for performance optimization
 * - Loading state to prevent hydration mismatches
 *
 * Accessibility:
 * - WCAG 2.1 Level AA compliant
 * - Keyboard navigable (Tab, Enter, Space)
 * - Screen reader announces current state and action
 * - High contrast focus ring for visibility
 * - Reduced motion support for users with vestibular disorders
 *
 * @component
 * @example
 * <ThemeToggle />
 */

export const ThemeToggle = memo(() => {
  const { isDarkMode, toggleTheme, prefersReducedMotion, isInitialized } = useTheme();
  const [isHovered, setIsHovered] = useState(false);
  const [isFocused, setIsFocused] = useState(false);

  // Memoize transition classes based on reduced motion preference
  const transitionClass = useMemo(() => (prefersReducedMotion ? "" : "apty-transition"), [prefersReducedMotion]);

  // Memoize icon transforms
  const iconTransform = useMemo(
    () => ({
      sun: isDarkMode
        ? prefersReducedMotion
          ? "opacity-0"
          : "opacity-0 rotate-180 scale-0"
        : prefersReducedMotion
          ? "opacity-100"
          : "opacity-100 rotate-0 scale-100",
      moon: isDarkMode
        ? prefersReducedMotion
          ? "opacity-100"
          : "opacity-100 rotate-0 scale-100"
        : prefersReducedMotion
          ? "opacity-0"
          : "opacity-0 -rotate-180 scale-0",
    }),
    [isDarkMode, prefersReducedMotion],
  );

  // Don't render until initialized to prevent hydration mismatch
  if (!isInitialized) {
    return (
      <div className="w-10 h-10 lg:w-10 lg:h-10 rounded-full bg-apty-bg-elevated border-2 border-apty-border-default animate-pulse" />
    );
  }

  return (
    <div className="relative">
      <button
        onClick={toggleTheme}
        onMouseEnter={() => setIsHovered(true)}
        onMouseLeave={() => setIsHovered(false)}
        onFocus={() => setIsFocused(true)}
        onBlur={() => setIsFocused(false)}
        className={`
          relative flex items-center justify-center 
          w-12 h-12 lg:w-10 lg:h-10 rounded-full 
          bg-apty-bg-elevated border-2 border-apty-border-default 
          shadow-apty-lg ${transitionClass}
          hover:shadow-apty-xl hover:border-apty-primary 
          focus:outline-none focus:ring-4 focus:ring-apty-focus-ring 
          group
        `}
        aria-label={isDarkMode ? "Switch to light mode" : "Switch to dark mode"}
        aria-pressed={isDarkMode}
        aria-live="polite"
        title={isDarkMode ? "Switch to light mode" : "Switch to dark mode"}
      >
        {/* Screen reader only text */}
        <span className="sr-only">
          Current theme: {isDarkMode ? "dark" : "light"}. Click to switch to {isDarkMode ? "light" : "dark"} mode.
        </span>

        {/* Icon container */}
        <div className="relative w-5 h-5 lg:w-4 lg:h-4" aria-hidden="true">
          {/* Sun Icon */}
          <svg
            className={`
              absolute inset-0 w-5 h-5 lg:w-4 lg:h-4 text-apty-warning 
              ${prefersReducedMotion ? "" : "transition-all duration-300 ease-in-out"}
              transform ${iconTransform.sun}
            `}
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle cx="12" cy="12" r="5" />
            <path d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24" />
          </svg>

          {/* Moon Icon */}
          <svg
            className={`
              absolute inset-0 w-5 h-5 lg:w-4 lg:h-4 text-apty-info 
              ${prefersReducedMotion ? "" : "transition-all duration-300 ease-in-out"}
              transform ${iconTransform.moon}
            `}
            fill="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
          </svg>
        </div>
      </button>
    </div>
  );
});

ThemeToggle.displayName = "ThemeToggle";
